{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ion.catana\\\\OneDrive - ENGITEL SPA\\\\Desktop\\\\Work\\\\keycloud\\\\src\\\\components\\\\modals\\\\EditApartmentModal.js\",\n  _s = $RefreshSig$();\n// src/components/modals/EditApartmentModal.js\nimport React, { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogTitle, Box } from \"@mui/material\";\nimport { pxToRem } from \"../../utils/pxToRem\";\nimport LinkDurationField from \"../customComponents/LinkDurationField\";\nimport FixedLinkSwitch from \"../customComponents/FixedLinkSwitch\";\nimport DatePickers from \"../customComponents/DatePickers\";\nimport GenerateLinkButton from \"../customComponents/GenerateLinkButton\";\nimport CopyLinkField from \"../customComponents/CopyLinkField\";\nimport ActionButtons from \"../customComponents/ActionButtons\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst EditApartmentModal = ({\n  open,\n  onClose,\n  apartment,\n  onLinkGenerated,\n  disabled\n}) => {\n  _s();\n  const [localGeneratedLink, setLocalGeneratedLink] = useState(\"\");\n  const [selectedCheckInDate, setSelectedCheckInDate] = useState(null);\n  const [selectedCheckOutDate, setSelectedCheckOutDate] = useState(null);\n  const [linkDuration, setLinkDuration] = useState(\"1 gg\");\n  const [isFixedLink, setIsFixedLink] = useState(false);\n  useEffect(() => {\n    if (apartment) {\n      setLocalGeneratedLink(apartment.generatedLink || \"\");\n    }\n  }, [apartment]);\n  const generateRandomLink = () => {\n    if (apartment) {\n      const newLink = `HTTP://q=IDapt=${apartment.id}`;\n      setLocalGeneratedLink(newLink);\n      onLinkGenerated(apartment.id, newLink);\n    }\n  };\n  const copyToClipboard = () => {\n    if (localGeneratedLink) {\n      navigator.clipboard.writeText(localGeneratedLink).catch(err => console.error(\"Errore durante la copia negli appunti: \", err));\n    }\n  };\n  const calculateLinkDuration = (checkIn, checkOut) => {\n    if (checkIn && checkOut) {\n      if (checkOut.isBefore(checkIn)) {\n        setLinkDuration(\"Data non valida\");\n      } else {\n        const duration = checkOut.diff(checkIn, \"day\");\n        setLinkDuration(`${duration} gg`);\n      }\n    }\n  };\n  useEffect(() => {\n    if (!isFixedLink) {\n      calculateLinkDuration(selectedCheckInDate, selectedCheckOutDate);\n    } else {\n      setLinkDuration(\"∞\");\n    }\n  }, [selectedCheckInDate, selectedCheckOutDate, isFixedLink]);\n  const isGenerateButtonDisabled = disabled || localGeneratedLink !== \"\";\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: open,\n    onClose: onClose,\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      sx: {\n        fontSize: pxToRem(24),\n        textAlign: \"center\"\n      },\n      children: apartment ? `Edit ${apartment.name}` : \"Edit Apartment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      sx: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        gap: pxToRem(8),\n        width: pxToRem(300),\n        padding: pxToRem(16)\n      },\n      children: apartment && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(LinkDurationField, {\n          linkDuration: linkDuration\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FixedLinkSwitch, {\n          isFixedLink: isFixedLink,\n          onChange: e => setIsFixedLink(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: isFixedLink ? \"none\" : \"flex\",\n            flexDirection: \"column\",\n            gap: pxToRem(16)\n          },\n          children: /*#__PURE__*/_jsxDEV(DatePickers, {\n            checkInDate: selectedCheckInDate,\n            setCheckInDate: setSelectedCheckInDate,\n            checkOutDate: selectedCheckOutDate,\n            setCheckOutDate: setSelectedCheckOutDate,\n            isDisabled: isFixedLink\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(GenerateLinkButton, {\n          onClick: generateRandomLink,\n          isDisabled: isGenerateButtonDisabled\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CopyLinkField, {\n          link: localGeneratedLink,\n          onCopy: copyToClipboard\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ActionButtons, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(EditApartmentModal, \"sDLUVtr9CphnjWizQEsD5cIp8QM=\");\n_c = EditApartmentModal;\nexport default EditApartmentModal;\nvar _c;\n$RefreshReg$(_c, \"EditApartmentModal\");","map":{"version":3,"names":["React","useState","useEffect","Dialog","DialogContent","DialogTitle","Box","pxToRem","LinkDurationField","FixedLinkSwitch","DatePickers","GenerateLinkButton","CopyLinkField","ActionButtons","jsxDEV","_jsxDEV","Fragment","_Fragment","EditApartmentModal","open","onClose","apartment","onLinkGenerated","disabled","_s","localGeneratedLink","setLocalGeneratedLink","selectedCheckInDate","setSelectedCheckInDate","selectedCheckOutDate","setSelectedCheckOutDate","linkDuration","setLinkDuration","isFixedLink","setIsFixedLink","generatedLink","generateRandomLink","newLink","id","copyToClipboard","navigator","clipboard","writeText","catch","err","console","error","calculateLinkDuration","checkIn","checkOut","isBefore","duration","diff","isGenerateButtonDisabled","children","sx","fontSize","textAlign","name","fileName","_jsxFileName","lineNumber","columnNumber","display","flexDirection","gap","width","padding","onChange","e","target","checked","checkInDate","setCheckInDate","checkOutDate","setCheckOutDate","isDisabled","onClick","link","onCopy","_c","$RefreshReg$"],"sources":["C:/Users/ion.catana/OneDrive - ENGITEL SPA/Desktop/Work/keycloud/src/components/modals/EditApartmentModal.js"],"sourcesContent":["// src/components/modals/EditApartmentModal.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Dialog, DialogContent, DialogTitle, Box } from \"@mui/material\";\r\nimport { pxToRem } from \"../../utils/pxToRem\";\r\nimport LinkDurationField from \"../customComponents/LinkDurationField\";\r\nimport FixedLinkSwitch from \"../customComponents/FixedLinkSwitch\";\r\nimport DatePickers from \"../customComponents/DatePickers\";\r\nimport GenerateLinkButton from \"../customComponents/GenerateLinkButton\";\r\nimport CopyLinkField from \"../customComponents/CopyLinkField\";\r\nimport ActionButtons from \"../customComponents/ActionButtons\";\r\n\r\nconst EditApartmentModal = ({\r\n  open,\r\n  onClose,\r\n  apartment,\r\n  onLinkGenerated,\r\n  disabled,\r\n}) => {\r\n  const [localGeneratedLink, setLocalGeneratedLink] = useState(\"\");\r\n  const [selectedCheckInDate, setSelectedCheckInDate] = useState(null);\r\n  const [selectedCheckOutDate, setSelectedCheckOutDate] = useState(null);\r\n  const [linkDuration, setLinkDuration] = useState(\"1 gg\");\r\n  const [isFixedLink, setIsFixedLink] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (apartment) {\r\n      setLocalGeneratedLink(apartment.generatedLink || \"\");\r\n    }\r\n  }, [apartment]);\r\n\r\n  const generateRandomLink = () => {\r\n    if (apartment) {\r\n      const newLink = `HTTP://q=IDapt=${apartment.id}`;\r\n      setLocalGeneratedLink(newLink);\r\n      onLinkGenerated(apartment.id, newLink);\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = () => {\r\n    if (localGeneratedLink) {\r\n      navigator.clipboard\r\n        .writeText(localGeneratedLink)\r\n        .catch((err) =>\r\n          console.error(\"Errore durante la copia negli appunti: \", err)\r\n        );\r\n    }\r\n  };\r\n\r\n  const calculateLinkDuration = (checkIn, checkOut) => {\r\n    if (checkIn && checkOut) {\r\n      if (checkOut.isBefore(checkIn)) {\r\n        setLinkDuration(\"Data non valida\");\r\n      } else {\r\n        const duration = checkOut.diff(checkIn, \"day\");\r\n        setLinkDuration(`${duration} gg`);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isFixedLink) {\r\n      calculateLinkDuration(selectedCheckInDate, selectedCheckOutDate);\r\n    } else {\r\n      setLinkDuration(\"∞\");\r\n    }\r\n  }, [selectedCheckInDate, selectedCheckOutDate, isFixedLink]);\r\n\r\n  const isGenerateButtonDisabled = disabled || localGeneratedLink !== \"\";\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose}>\r\n      <DialogTitle sx={{ fontSize: pxToRem(24), textAlign: \"center\" }}>\r\n        {apartment ? `Edit ${apartment.name}` : \"Edit Apartment\"}\r\n      </DialogTitle>\r\n\r\n      <DialogContent\r\n        sx={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          gap: pxToRem(8),\r\n          width: pxToRem(300),\r\n          padding: pxToRem(16),\r\n        }}>\r\n        {apartment && (\r\n          <>\r\n            <LinkDurationField linkDuration={linkDuration} />\r\n            <FixedLinkSwitch\r\n              isFixedLink={isFixedLink}\r\n              onChange={(e) => setIsFixedLink(e.target.checked)}\r\n            />\r\n            <Box\r\n              sx={{\r\n                display: isFixedLink ? \"none\" : \"flex\",\r\n                flexDirection: \"column\",\r\n                gap: pxToRem(16),\r\n              }}>\r\n              <DatePickers\r\n                checkInDate={selectedCheckInDate}\r\n                setCheckInDate={setSelectedCheckInDate}\r\n                checkOutDate={selectedCheckOutDate}\r\n                setCheckOutDate={setSelectedCheckOutDate}\r\n                isDisabled={isFixedLink}\r\n              />\r\n            </Box>\r\n            <GenerateLinkButton\r\n              onClick={generateRandomLink}\r\n              isDisabled={isGenerateButtonDisabled}\r\n            />\r\n            <CopyLinkField link={localGeneratedLink} onCopy={copyToClipboard} />\r\n            <ActionButtons />\r\n          </>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default EditApartmentModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}